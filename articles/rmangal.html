<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started with rmangal • rOpenSci: rmangal</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- ropensci --><link href="../ropensci.css" rel="stylesheet">
<meta property="og:title" content="Get started with rmangal">
<meta property="og:description" content="rmangal">
<meta name="twitter:card" content="summary">
<!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script type="text/javascript">
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
  _paq.push(["setCookieDomain", "*.ropensci.org"]);
  _paq.push(["setDomains", ["*.ropensci.org"]]);
  _paq.push(["setDoNotTrack", true]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://ropensci.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.src='//cdn.matomo.cloud/ropensci.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();
  window.addEventListener('load', function () {
    window.cookieconsent.initialise({
        'palette': {
            'popup': {
                'background': '#427fd4'
            },
            'button': {
                'background': '#fff',
                'text': '#071159'
            }
        },
        'content': {
            'header': 'Cookies used on the website!',
            'message': 'We use Matomo to analyze traffic. Cookies are stored on your browser for 13 months. This data is only processed by us.',
            'dismiss': 'Got it!',
            'allow': 'Accept',
            'deny': 'Decline',
            'link': 'Privacy policy',
            'href': 'https://ropensci.org/privacy',
            'close': '&#x274c;',
            'policy': 'Privacy Policy',
            'target': '_blank',
        },
        'type': 'opt-in',
        onInitialise: function (status) {
            var type = this.options.type
            var didConsent = this.hasConsented()
            if (type === 'opt-in' && didConsent) {
                // enable cookies
                _paq.push(['rememberConsentGiven']);
            }
            if (type == 'opt-out' && !didConsent) {
                // disable cookies
                _paq.push(['forgetConsentGiven']);
            }
        },

        onStatusChange: function (status, chosenBefore) {
            var type = this.options.type
            var didConsent = this.hasConsented()
            if (type === 'opt-in' && didConsent) {
                // enable cookies
                _paq.push(['rememberConsentGiven']);
            }
            if (type == 'opt-out' && !didConsent) {
                // disable cookies
                _paq.push(['forgetConsentGiven'], 24);
            }
        },

        onRevokeChoice: function () {
            var type = this.options.type
            if (type === 'opt-in') {
                // disable cookies
                _paq.push(['forgetConsentGiven']);
            }
            if (type == 'opt-out' && !didConsent) {
                // disable cookies
                _paq.push(['forgetConsentGiven'], 24);
            }
        }
    })
})

</script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
        <a class="navbar-brand" href="../index.html"><i>rmangal <small>v2.0.2</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/rmangal.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropensci/rmangal/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right docsearch" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get started with rmangal</h1>
                        <h4 class="author">Steve Vissault &amp; Kevin Cazelles</h4>
                        
            <h4 class="date">2020-09-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/rmangal/blob/master/vignettes/rmangal.Rmd"><code>vignettes/rmangal.Rmd</code></a></small>
      <div class="hidden name"><code>rmangal.Rmd</code></div>

    </div>

    
    
<div id="context" class="section level1">
<h1 class="hasAnchor">
<a href="#context" class="anchor"></a>Context</h1>
<div id="the-mangal-project" class="section level2">
<h2 class="hasAnchor">
<a href="#the-mangal-project" class="anchor"></a>The Mangal project</h2>
<p><a href="https://mangal.io">The Mangal project</a> aims at archiving published ecological networks and at easing their retrieval. To do so, Mangal:</p>
<ol style="list-style-type: decimal">
<li><p>uses a data specification for ecological networks <span class="citation">(described in Poisot et al. 2016)</span>;</p></li>
<li><p>archives ecological networks in a <a href="https://www.postgresql.org/">PostgreSQL</a> database;</p></li>
<li>provides:</li>
</ol>
<ul>
<li>
<a href="https://mangal.io/#/">a data explorer</a> to visualize and download data available;</li>
<li>a <a href="https://mangal-wg.github.io/mangal-api/">RESTful Application Programming Interface (API)</a>;</li>
<li>a client library for Julia: <a href="https://github.com/PoisotLab/Mangal.jl">Mangal.jl</a>;</li>
<li>a client of this API for R: the <strong>rmangal</strong> package described below.</li>
</ul>
<p>Currently, 172 datasets are including in the database representing over <a href="https://mangal.io/#/network">1300 ecological networks</a>. In 2016, the first paper describing the project was published and introduced the first release of <strong>rmangal</strong> <span class="citation">(Poisot et al. 2016)</span>. Since then, the structure of the database has been improved (new fields have been added), several ecological networks added and the API entirely rewritten. Consequently, <a href="https://github.com/mangal-wg/rmangal-v1">the first release of the <strong>rmangal</strong></a> is obsolete (and archived) and we introduce <strong>rmangal v2.0</strong> in this vignette.</p>
</div>
<div id="data-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#data-structure" class="anchor"></a>Data structure</h2>
<p><br></p>
<div class="row">
<div class="col-md-6">
<p><img src="img/data_structure.png" width="100%"></p>
</div>
<div class="col-md-6">
<p>The diagram on the left side represents the structure of the Mangal database. All <em>references</em> included in Mangal correspond to a specific publication that includes one or several <em>dataset(s)</em>. This dataset is basically a collection of ecological <em>networks</em> whose <em>nodes</em> and <em>interactions</em> (edges) are stored in separate tables. Below, we briefly describe the content of each table.</p>
<p><strong>References</strong> – Information pertaining to a reference (scientific article, book, online website, etc.) characterizing an original collection of ecological networks. URLs of data and publication sources are included as well as persistent identifiers (when available) such as digital object identifiers (DOIs). This allows the user to retrieve more details about original publications using appropriate R packages such as <a href="https://docs.ropensci.org/rcrossref/">crossref</a>.</p>
<p><strong>Datasets</strong> – Metadata of the datasets attached to a reference. It includes a general description of the networks.</p>
<p><strong>Networks</strong> – Metadata of the networks attached to a dataset. It provides the sampling location, date and specific description of the network.</p>
<p><strong>Nodes</strong> – Information on the population, taxa or individu in the network. Each node has the original taxon name documented and taxonomic backbone provided by all services embedded in taxize <span class="citation">(Chamberlain et al. 2019)</span>.</p>
<p><strong>Interactions</strong> – Information on the interaction type (e.g. mutualism, predation, etc.), the strength, and the direction of the interaction between two nodes.</p>
</div>
</div>
</div>
<div id="authentication" class="section level2">
<h2 class="hasAnchor">
<a href="#authentication" class="anchor"></a>Authentication</h2>
<p>So far, the <code>rmangal</code> package provides methods to get access to the data store. Data requests (performed via <code><a href="https://httr.r-lib.org/reference/GET.html">httr::GET()</a></code>) do not require any authentication.</p>
<p>A bearer authentication strategy using <a href="https://orcid.org/">ORCID</a> credentials (as a third-party services) has been implemented on all <code>POST</code>, <code>DELETE</code>, <code>PUT</code> API operations to allow the user to add and delete new ecological to the data base. These features are not currently included in the <strong>rmangal</strong> package, but are under consideration for future major releases.</p>
</div>
</div>
<div id="how-to-use-rmangal" class="section level1">
<h1 class="hasAnchor">
<a href="#how-to-use-rmangal" class="anchor"></a>How to use <strong>rmangal</strong>
</h1>
<div id="overall-approach" class="section level2">
<h2 class="hasAnchor">
<a href="#overall-approach" class="anchor"></a>Overall approach</h2>
<p>In order to efficiently retrieve networks from the database, <strong>rmangal</strong> includes 7 search functions querying the 5 tables described above as well as a table dedicated to the taxonomy backbone.</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="../reference/search_references.html">search_references()</a></code>: search in the reference table, for instance the user can look for a specific <code>doi</code>;</li>
<li>
<code><a href="../reference/search_datasets.html">search_datasets()</a></code>: search among datasets using a keyword;</li>
<li>
<code><a href="../reference/search_networks.html">search_networks()</a></code> and <code><a href="../reference/search_networks.html">search_networks_sf()</a></code>: search networks based on a keyword or a geographical area;</li>
<li>
<code><a href="../reference/search_interactions.html">search_interactions()</a></code>: list all networks containing a specific interaction type;</li>
<li>
<code><a href="../reference/search_nodes.html">search_nodes()</a></code>: identify nodes based on nodes information;</li>
<li>
<code><a href="../reference/search_taxonomy.html">search_taxonomy()</a></code>: identify nodes based on taxonomic names and unique identifiers.</li>
</ol>
<p>All of these functions return specific class objects with the information needed to retrieve the corresponding set of ecological networks with <code><a href="../reference/get_collection.html">get_collection()</a></code>. Hence, the user can easily retrieve data in two steps:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">networks &lt;-<span class="st"> </span>search_<span class="op">*</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">get_collection</span>()</a></code></pre></div>
<p>Note that if there is only one network to be retrieved, <code><a href="../reference/get_collection.html">get_collection()</a></code> returns a <code>mgNetwork</code> object, otherwise it returns an object of class <code>mgNetworksCollection</code> which is a collection (a list) of <code>mgNetwork</code> objects. Below, we exemplify how to use the search functions, how to get a collection of networks and how to use other packages to carry out specific analyses.</p>
</div>
<div id="search-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#search-functions" class="anchor"></a>Search functions</h2>
<p>In <strong>rmangal</strong>, every functions queries a specific table and allow only one query at a time (see section <a href="#batch-analysis">Batch analysis</a> to learn how to perform more than one query). All the functions offer two ways to query the corresponding table:</p>
<ol style="list-style-type: decimal">
<li>a keyword: in this case, the entries returned are the partial or full keyword match of any strings contained in the table;</li>
<li>a custom query: in this case, entries returned are exact matches.</li>
</ol>
<p>Let’s load <strong>rmangal</strong> as well as two helper packages:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rmangal">rmangal</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">magrittr</span><span class="op">)</span> <span class="co"># for the pipe %&gt;%</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span> <span class="co"># to use tibble (enhanced data frames)</span></pre></div>
<div id="search-and-list-available-datasets" class="section level3">
<h3 class="hasAnchor">
<a href="#search-and-list-available-datasets" class="anchor"></a>Search and list available datasets</h3>
<p>Let’s assume we are looking for ecological networks including species living in lagoons. If we have no idea about any existing data set, the best starting point is then to query the <code>dataset</code> table with <code>lagoon</code> as a keyword:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">lagoon</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_datasets.html">search_datasets</a></span><span class="op">(</span>query <span class="op">=</span> <span class="st">"lagoon"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">lagoon</span><span class="op">)</span>
<span class="co">#&gt; [1] "tbl_df"           "tbl"              "data.frame"       "mgSearchDatasets"</span>
<span class="va">lagoon</span>
<span class="co">#&gt; # A tibble: 2 x 10</span>
<span class="co">#&gt;      id name  description public created_at updated_at ref_id user_id references</span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;lgl&gt;  &lt;chr&gt;      &lt;chr&gt;       &lt;int&gt;   &lt;int&gt; &lt;list&gt;    </span>
<span class="co">#&gt; 1    22 zeti… Dietary ma… TRUE   2019-02-2… 2019-02-2…     22       3 &lt;df[,11] …</span>
<span class="co">#&gt; 2    52 yane… Food web o… TRUE   2019-02-2… 2019-02-2…     53       3 &lt;df[,11] …</span>
<span class="co">#&gt; # … with 1 more variable: networks &lt;list&gt;</span></pre></div>
<p>If the Mangal reference id containing the lagoon networks was known, we could build a custom query as follow:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">lagoon_zetina</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_datasets.html">search_datasets</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>ref_id <span class="op">=</span> <span class="fl">22</span><span class="op">)</span><span class="op">)</span>
<span class="va">lagoon_zetina</span>
<span class="co">#&gt; # A tibble: 1 x 10</span>
<span class="co">#&gt;      id name  description public created_at updated_at ref_id user_id references</span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       &lt;lgl&gt;  &lt;chr&gt;      &lt;chr&gt;       &lt;int&gt;   &lt;int&gt; &lt;list&gt;    </span>
<span class="co">#&gt; 1    22 zeti… Dietary ma… TRUE   2019-02-2… 2019-02-2…     22       3 &lt;df[,11] …</span>
<span class="co">#&gt; # … with 1 more variable: networks &lt;list&gt;</span></pre></div>
<p>Note that if an empty character is passed, i.e. <code>""</code>, all entries are returned. We can use this behavior to list all datasets available:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">all_datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_datasets.html">search_datasets</a></span><span class="op">(</span><span class="st">""</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">all_datasets</span><span class="op">)</span>
<span class="co">#&gt; Rows: 173</span>
<span class="co">#&gt; Columns: 10</span>
<span class="co">#&gt; $ id          &lt;int&gt; 2, 7, 9, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, …</span>
<span class="co">#&gt; $ name        &lt;chr&gt; "howking_1968", "lundgren_olesen_2005", "elberling_olesen…</span>
<span class="co">#&gt; $ description &lt;chr&gt; "Insect activity recorded on flower at Lake Hazen, Ellesm…</span>
<span class="co">#&gt; $ public      &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…</span>
<span class="co">#&gt; $ created_at  &lt;chr&gt; "2019-02-22T15:39:00.427Z", "2019-02-22T20:04:25.322Z", "…</span>
<span class="co">#&gt; $ updated_at  &lt;chr&gt; "2019-02-22T15:39:00.427Z", "2019-02-22T20:04:25.322Z", "…</span>
<span class="co">#&gt; $ ref_id      &lt;int&gt; 2, 7, 9, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, …</span>
<span class="co">#&gt; $ user_id     &lt;int&gt; 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, …</span>
<span class="co">#&gt; $ references  &lt;list&gt; [&lt;data.frame[1 x 11]&gt;, &lt;data.frame[1 x 11]&gt;, &lt;data.frame…</span>
<span class="co">#&gt; $ networks    &lt;list&gt; [&lt;data.frame[1 x 13]&gt;, &lt;data.frame[1 x 13]&gt;, &lt;data.frame…</span></pre></div>
<p>As shown in the diagram above, a dataset comes from a specific reference and <code><a href="../reference/search_references.html">search_references()</a></code> queries the reference table directly. A handy argument of this function is <code>doi</code> as it allows to pass a Digital Object Identifier and so to retrieve all datasets attached to a specific publication.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">zetina_2003</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_references.html">search_references</a></span><span class="op">(</span>doi <span class="op">=</span> <span class="st">"10.1016/s0272-7714(02)00410-9"</span><span class="op">)</span></pre></div>
</div>
<div id="finding-a-specific-network" class="section level3">
<h3 class="hasAnchor">
<a href="#finding-a-specific-network" class="anchor"></a>Finding a specific network</h3>
<p>We can also search by keyword across all networks.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">insect_coll</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_networks.html">search_networks</a></span><span class="op">(</span>query<span class="op">=</span><span class="st">"insect%"</span><span class="op">)</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">insect_coll</span><span class="op">)</span>
<span class="co">#&gt; Rows: 14</span>
<span class="co">#&gt; Columns: 13</span>
<span class="co">#&gt; $ id               &lt;int&gt; 18, 909, 948, 1460, 1461, 1471, 1493, 1501, 1500, 15…</span>
<span class="co">#&gt; $ name             &lt;chr&gt; "mosquin_martin_1967_19650731_18", "elberling_olesen…</span>
<span class="co">#&gt; $ date             &lt;chr&gt; "1965-07-31T00:00:00.000Z", "1994-08-23T00:00:00.000…</span>
<span class="co">#&gt; $ description      &lt;chr&gt; "Occurence of flower-visiting insect on plant specie…</span>
<span class="co">#&gt; $ public           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE…</span>
<span class="co">#&gt; $ all_interactions &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FAL…</span>
<span class="co">#&gt; $ created_at       &lt;chr&gt; "2019-02-22T18:38:37.491Z", "2019-02-24T22:21:32.444…</span>
<span class="co">#&gt; $ updated_at       &lt;chr&gt; "2019-02-22T18:38:37.491Z", "2019-02-24T22:21:32.444…</span>
<span class="co">#&gt; $ dataset_id       &lt;int&gt; 4, 9, 66, 91, 91, 99, 114, 118, 118, 119, 124, 124, …</span>
<span class="co">#&gt; $ user_id          &lt;int&gt; 3, 2, 2, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4</span>
<span class="co">#&gt; $ geom_type        &lt;chr&gt; "Point", "Point", "Point", "Point", "Point", "Point"…</span>
<span class="co">#&gt; $ geom_lon         &lt;list&gt; [-114.9667, 18.5, 138.3833, -85.09443, -83.50833, -…</span>
<span class="co">#&gt; $ geom_lat         &lt;list&gt; [75, 68.35, 35.5833, 10.4568, 8.534018, 9.933982, 5…</span></pre></div>
<p>It is also possible to retrieve all networks based on interaction types involved:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="co"># List all interaction types available</span>
<span class="fu"><a href="../reference/avail_type.html">avail_type</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  [1] "competition"  "amensalism"   "neutralism"   "commensalism" "mutualism"   </span>
<span class="co">#&gt;  [6] "parasitism"   "predation"    "herbivory"    "symbiosis"    "scavenger"   </span>
<span class="co">#&gt; [11] "detritivore"  "unspecified"</span>
<span class="va">comp_interac</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_interactions.html">search_interactions</a></span><span class="op">(</span>type<span class="op">=</span><span class="st">"competition"</span><span class="op">)</span>
<span class="co"># Number of competition interactions in mangal</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">comp_interac</span><span class="op">)</span>
<span class="co">#&gt; [1] 12</span></pre></div>
<p><code><a href="../reference/search_networks.html">search_networks_sf()</a></code> handles spatial queries: argument <code>query_sf</code> takes a <a href="https://cran.r-project.org/package=sf"><code>sf</code></a> object as input and returns all networks included in the spatial extent of this object. For instance, one can retrieve all Californian networks included in Mangal like so:</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/mapview">mapview</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://lincolnmullen.com/software/usaboundaries/">USAboundaries</a></span><span class="op">)</span>

<span class="va">area</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://lincolnmullen.com/software/usaboundaries/reference/us_states.html">us_states</a></span><span class="op">(</span>state <span class="op">=</span> <span class="st">"california"</span><span class="op">)</span>
<span class="va">in_CA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_networks.html">search_networks_sf</a></span><span class="op">(</span><span class="va">area</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapView</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"red"</span>, legend <span class="op">=</span> <span class="cn">FALSE</span>, col.regions <span class="op">=</span> <span class="st">"#FF000033"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapView</a></span><span class="op">(</span><span class="va">in_CA</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </pre></div>
<p><img src="img/map1.png" width="60%"></p>
</div>
<div id="search-for-a-specific-taxon" class="section level3">
<h3 class="hasAnchor">
<a href="#search-for-a-specific-taxon" class="anchor"></a>Search for a specific taxon</h3>
<p>The user can easily identify networks including a specific taxonomic entity with <code><a href="../reference/search_taxonomy.html">search_taxonomy()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="va">sr_ficus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_taxonomy.html">search_taxonomy</a></span><span class="op">(</span><span class="st">"Ficus"</span><span class="op">)</span></pre></div>
<p>This function allows to search for a specific taxonomic entity using it’s validated name or unique identifiers, i.e. EOL, TSN, GBIF, COL, BOLD and NCBI IDs. Taxon names of the <code>taxonomy</code> table were validated with TNRS (see <a href="http://tnrs.iplantcollaborative.org/" class="uri">http://tnrs.iplantcollaborative.org/</a> and/or GNR (see <a href="https://resolver.globalnames.org/" class="uri">https://resolver.globalnames.org/</a>). The taxon names in this table might not be the taxon name documented in the original publication. In order to identify relevant networks with the original name, use [search_nodes()].</p>
<p>The validation of taxon names was performed by an automated procedure using taxize <span class="citation">(Chamberlain et al. 2019)</span> and if there is any doubt, the original names recorded by authors should be regarded as the most reliable information. Please report any issue related to taxonomy at <a href="https://github.com/mangal-wg/mangal-datasets/issues" class="uri">https://github.com/mangal-wg/mangal-datasets/issues</a>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="fu"><a href="../reference/search_taxonomy.html">search_taxonomy</a></span><span class="op">(</span>tsn <span class="op">=</span> <span class="fl">28749</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1</span>
<span class="co">#&gt; Columns: 18</span>
<span class="co">#&gt; $ id                  &lt;int&gt; 2629</span>
<span class="co">#&gt; $ original_name       &lt;chr&gt; "Acer negundo"</span>
<span class="co">#&gt; $ node_level          &lt;chr&gt; "taxon"</span>
<span class="co">#&gt; $ network_id          &lt;int&gt; 19</span>
<span class="co">#&gt; $ taxonomy_id         &lt;int&gt; 2</span>
<span class="co">#&gt; $ created_at          &lt;chr&gt; "2019-02-22T18:48:49.433Z"</span>
<span class="co">#&gt; $ updated_at          &lt;chr&gt; "2019-02-22T18:48:49.433Z"</span>
<span class="co">#&gt; $ taxonomy.id         &lt;int&gt; 2</span>
<span class="co">#&gt; $ taxonomy.name       &lt;chr&gt; "Acer negundo"</span>
<span class="co">#&gt; $ taxonomy.ncbi       &lt;int&gt; 4023</span>
<span class="co">#&gt; $ taxonomy.tsn        &lt;int&gt; 28749</span>
<span class="co">#&gt; $ taxonomy.eol        &lt;int&gt; 583069</span>
<span class="co">#&gt; $ taxonomy.bold       &lt;int&gt; 100987</span>
<span class="co">#&gt; $ taxonomy.gbif       &lt;int&gt; 3189866</span>
<span class="co">#&gt; $ taxonomy.col        &lt;chr&gt; "90203e29e2f59e5754167f89b9eba3cc"</span>
<span class="co">#&gt; $ taxonomy.rank       &lt;chr&gt; "species"</span>
<span class="co">#&gt; $ taxonomy.created_at &lt;chr&gt; "2019-02-21T21:17:12.585Z"</span>
<span class="co">#&gt; $ taxonomy.updated_at &lt;chr&gt; "2019-06-14T15:20:36.273Z"</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="fu"><a href="../reference/search_taxonomy.html">search_taxonomy</a></span><span class="op">(</span>eol <span class="op">=</span> <span class="fl">583069</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1</span>
<span class="co">#&gt; Columns: 18</span>
<span class="co">#&gt; $ id                  &lt;int&gt; 2629</span>
<span class="co">#&gt; $ original_name       &lt;chr&gt; "Acer negundo"</span>
<span class="co">#&gt; $ node_level          &lt;chr&gt; "taxon"</span>
<span class="co">#&gt; $ network_id          &lt;int&gt; 19</span>
<span class="co">#&gt; $ taxonomy_id         &lt;int&gt; 2</span>
<span class="co">#&gt; $ created_at          &lt;chr&gt; "2019-02-22T18:48:49.433Z"</span>
<span class="co">#&gt; $ updated_at          &lt;chr&gt; "2019-02-22T18:48:49.433Z"</span>
<span class="co">#&gt; $ taxonomy.id         &lt;int&gt; 2</span>
<span class="co">#&gt; $ taxonomy.name       &lt;chr&gt; "Acer negundo"</span>
<span class="co">#&gt; $ taxonomy.ncbi       &lt;int&gt; 4023</span>
<span class="co">#&gt; $ taxonomy.tsn        &lt;int&gt; 28749</span>
<span class="co">#&gt; $ taxonomy.eol        &lt;int&gt; 583069</span>
<span class="co">#&gt; $ taxonomy.bold       &lt;int&gt; 100987</span>
<span class="co">#&gt; $ taxonomy.gbif       &lt;int&gt; 3189866</span>
<span class="co">#&gt; $ taxonomy.col        &lt;chr&gt; "90203e29e2f59e5754167f89b9eba3cc"</span>
<span class="co">#&gt; $ taxonomy.rank       &lt;chr&gt; "species"</span>
<span class="co">#&gt; $ taxonomy.created_at &lt;chr&gt; "2019-02-21T21:17:12.585Z"</span>
<span class="co">#&gt; $ taxonomy.updated_at &lt;chr&gt; "2019-06-14T15:20:36.273Z"</span></pre></div>
<p>Note that in some case, one may need to find a dataset based on the original name included in the publication, in such case, <code><a href="../reference/search_nodes.html">search_nodes()</a></code> must be used:</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="va">sr_ficus2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_nodes.html">search_nodes</a></span><span class="op">(</span><span class="st">"Ficus"</span><span class="op">)</span></pre></div>
</div>
</div>
<div id="get-networks-associated-with-a-search_-object" class="section level2">
<h2 class="hasAnchor">
<a href="#get-networks-associated-with-a-search_-object" class="anchor"></a>Get networks associated with a <code>search_*</code> object</h2>
<p>Once the search performed, ecological networks are accessible from the object returned with <code><a href="../reference/get_collection.html">get_collection()</a></code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="va">nets_lagoons</span> <span class="op">&lt;-</span> <span class="va">lagoon</span> <span class="op">%&gt;%</span> <span class="va">get_collection</span>
<span class="va">nets_in_CA</span> <span class="op">&lt;-</span> <span class="va">in_CA</span> <span class="op">%&gt;%</span> <span class="va">get_collection</span>
<span class="va">nets_competition</span> <span class="op">&lt;-</span> <span class="va">comp_interac</span> <span class="op">%&gt;%</span> <span class="va">get_collection</span></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="va">nets_lagoons</span>
<span class="co">#&gt; A collection of 3 networks</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; * Network #86 included in dataset #22</span>
<span class="co">#&gt; * Description: Dietary matrix of the Huizache–Caimanero lagoon</span>
<span class="co">#&gt; * Includes 189 edges and 26 nodes </span>
<span class="co">#&gt; * Current taxonomic IDs coverage for nodes of this network: </span>
<span class="co">#&gt;   --&gt; ITIS: 81%, BOLD: 81%, EOL: 85%, COL: 81%, GBIF: 0%, NCBI: 85%</span>
<span class="co">#&gt; * Published in ref # DOI:10.1016/s0272-7714(02)00410-9</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; * Network #927 included in dataset #52</span>
<span class="co">#&gt; * Description: Food web of the Brackish lagoon</span>
<span class="co">#&gt; * Includes 27 edges and 11 nodes </span>
<span class="co">#&gt; * Current taxonomic IDs coverage for nodes of this network: </span>
<span class="co">#&gt;   --&gt; ITIS: 45%, BOLD: 45%, EOL: 45%, COL: 45%, GBIF: 18%, NCBI: 45%</span>
<span class="co">#&gt; * Published in ref # DOI:NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; * Network #926 included in dataset #52</span>
<span class="co">#&gt; * Description: Food web of the Costal lagoon</span>
<span class="co">#&gt; * Includes 34 edges and 13 nodes </span>
<span class="co">#&gt; * Current taxonomic IDs coverage for nodes of this network: </span>
<span class="co">#&gt;   --&gt; ITIS: 54%, BOLD: 54%, EOL: 54%, COL: 54%, GBIF: 15%, NCBI: 54%</span>
<span class="co">#&gt; * Published in ref # DOI:NA</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">nets_lagoons</span><span class="op">)</span>
<span class="co">#&gt; [1] "mgNetworksCollection"</span></pre></div>
<p>Note that <code>mgNetworksCollection</code> objects are lists of <code>mgNetwork</code> object which are a list of five datasets reflecting the 5 tables presented in the diagram in the first section:</p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">nets_lagoons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt; [1] "network"      "nodes"        "interactions" "dataset"      "reference"</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">nets_lagoons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">network</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1</span>
<span class="co">#&gt; Columns: 13</span>
<span class="co">#&gt; $ network_id       &lt;int&gt; 86</span>
<span class="co">#&gt; $ name             &lt;chr&gt; "zetina_2003_20030101_86"</span>
<span class="co">#&gt; $ date             &lt;chr&gt; "2003-01-01T00:00:00.000Z"</span>
<span class="co">#&gt; $ description      &lt;chr&gt; "Dietary matrix of the Huizache–Caimanero lagoon"</span>
<span class="co">#&gt; $ public           &lt;lgl&gt; TRUE</span>
<span class="co">#&gt; $ all_interactions &lt;lgl&gt; FALSE</span>
<span class="co">#&gt; $ created_at       &lt;chr&gt; "2019-02-23T17:04:34.046Z"</span>
<span class="co">#&gt; $ updated_at       &lt;chr&gt; "2019-02-23T17:04:34.046Z"</span>
<span class="co">#&gt; $ dataset_id       &lt;int&gt; 22</span>
<span class="co">#&gt; $ user_id          &lt;int&gt; 3</span>
<span class="co">#&gt; $ geom_type        &lt;chr&gt; "Point"</span>
<span class="co">#&gt; $ geom_lon         &lt;list&gt; [-106.1099]</span>
<span class="co">#&gt; $ geom_lat         &lt;list&gt; [22.98531]</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">nets_lagoons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">nodes</span><span class="op">)</span>
<span class="co">#&gt; Rows: 26</span>
<span class="co">#&gt; Columns: 19</span>
<span class="co">#&gt; $ node_id             &lt;int&gt; 4904, 4905, 4906, 4907, 4908, 4909, 4910, 4911, 4…</span>
<span class="co">#&gt; $ original_name       &lt;chr&gt; "Scianids", "Elopids", "Lutjanids", "Carangids", …</span>
<span class="co">#&gt; $ node_level          &lt;chr&gt; "taxon", "taxon", "taxon", "taxon", "taxon", "tax…</span>
<span class="co">#&gt; $ network_id          &lt;int&gt; 86, 86, 86, 86, 86, 86, 86, 86, 86, 86, 86, 86, 8…</span>
<span class="co">#&gt; $ taxonomy_id         &lt;int&gt; 4363, 4364, 4365, 4366, 4367, 4368, 4369, 4355, 3…</span>
<span class="co">#&gt; $ created_at          &lt;chr&gt; "2019-02-23T17:04:42.505Z", "2019-02-23T17:04:42.…</span>
<span class="co">#&gt; $ updated_at          &lt;chr&gt; "2019-02-23T17:04:42.505Z", "2019-02-23T17:04:42.…</span>
<span class="co">#&gt; $ taxonomy.id         &lt;int&gt; 4363, 4364, 4365, 4366, 4367, 4368, 4369, 4355, 3…</span>
<span class="co">#&gt; $ taxonomy.name       &lt;chr&gt; "Sciaenidae", "Elops", "Lutjanidae", "Carangidae"…</span>
<span class="co">#&gt; $ taxonomy.ncbi       &lt;int&gt; 30870, 7927, 30850, 8157, 8184, 31017, 30840, 825…</span>
<span class="co">#&gt; $ taxonomy.tsn        &lt;int&gt; 169237, 28630, 168845, 168584, 167642, 43998, 169…</span>
<span class="co">#&gt; $ taxonomy.eol        &lt;int&gt; 5211, 46561210, 5294, 5361, 5355, 5115, 5317, 517…</span>
<span class="co">#&gt; $ taxonomy.bold       &lt;int&gt; 1856, 4061, 1858, 1851, 586, 1313, 1855, 1126, 49…</span>
<span class="co">#&gt; $ taxonomy.gbif       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span>
<span class="co">#&gt; $ taxonomy.col        &lt;chr&gt; "81a86c329909d507edb5c296906ef3f4", "94532a14786a…</span>
<span class="co">#&gt; $ taxonomy.rank       &lt;chr&gt; "family", "genus", "family", "family", "family", …</span>
<span class="co">#&gt; $ taxonomy.created_at &lt;chr&gt; "2019-02-23T17:04:35.620Z", "2019-02-23T17:04:35.…</span>
<span class="co">#&gt; $ taxonomy.updated_at &lt;chr&gt; "2019-06-14T15:25:46.438Z", "2019-06-14T15:25:46.…</span>
<span class="co">#&gt; $ taxonomy            &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">nets_lagoons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">interactions</span><span class="op">)</span>
<span class="co">#&gt; Rows: 189</span>
<span class="co">#&gt; Columns: 20</span>
<span class="co">#&gt; $ interaction_id        &lt;int&gt; 48346, 48347, 48376, 48377, 48378, 48379, 48380…</span>
<span class="co">#&gt; $ node_from             &lt;int&gt; 4909, 4909, 4912, 4912, 4912, 4912, 4912, 4912,…</span>
<span class="co">#&gt; $ node_to               &lt;int&gt; 4914, 4915, 4912, 4914, 4915, 4918, 4919, 4920,…</span>
<span class="co">#&gt; $ date                  &lt;chr&gt; "2003-01-01T00:00:00.000Z", "2003-01-01T00:00:0…</span>
<span class="co">#&gt; $ direction             &lt;chr&gt; "directed", "directed", "directed", "directed",…</span>
<span class="co">#&gt; $ type                  &lt;chr&gt; "predation", "predation", "predation", "predati…</span>
<span class="co">#&gt; $ method                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span>
<span class="co">#&gt; $ attr_id               &lt;int&gt; 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12,…</span>
<span class="co">#&gt; $ value                 &lt;dbl&gt; 0.089, 0.029, 0.026, 0.025, 0.003, 0.009, 0.009…</span>
<span class="co">#&gt; $ geom                  &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span>
<span class="co">#&gt; $ public                &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…</span>
<span class="co">#&gt; $ network_id            &lt;int&gt; 86, 86, 86, 86, 86, 86, 86, 86, 86, 86, 86, 86,…</span>
<span class="co">#&gt; $ created_at            &lt;chr&gt; "2019-02-23T17:05:43.043Z", "2019-02-23T17:05:4…</span>
<span class="co">#&gt; $ updated_at            &lt;chr&gt; "2019-02-23T17:05:43.043Z", "2019-02-23T17:05:4…</span>
<span class="co">#&gt; $ attribute.id          &lt;int&gt; 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12,…</span>
<span class="co">#&gt; $ attribute.name        &lt;chr&gt; "dietary matrix", "dietary matrix", "dietary ma…</span>
<span class="co">#&gt; $ attribute.description &lt;chr&gt; "Proportions of the consumer diets made up by t…</span>
<span class="co">#&gt; $ attribute.unit        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…</span>
<span class="co">#&gt; $ attribute.created_at  &lt;chr&gt; "2019-02-23T17:04:25.350Z", "2019-02-23T17:04:2…</span>
<span class="co">#&gt; $ attribute.updated_at  &lt;chr&gt; "2019-02-23T17:04:25.350Z", "2019-02-23T17:04:2…</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">nets_lagoons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">dataset</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1</span>
<span class="co">#&gt; Columns: 8</span>
<span class="co">#&gt; $ dataset_id  &lt;int&gt; 22</span>
<span class="co">#&gt; $ name        &lt;chr&gt; "zetina_2003"</span>
<span class="co">#&gt; $ description &lt;chr&gt; "Dietary matrix of the Huizache–Caimanero lagoon"</span>
<span class="co">#&gt; $ public      &lt;lgl&gt; TRUE</span>
<span class="co">#&gt; $ created_at  &lt;chr&gt; "2019-02-23T17:04:32.017Z"</span>
<span class="co">#&gt; $ updated_at  &lt;chr&gt; "2019-02-23T17:04:32.017Z"</span>
<span class="co">#&gt; $ ref_id      &lt;int&gt; 22</span>
<span class="co">#&gt; $ user_id     &lt;int&gt; 3</span>
<span class="fu"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">nets_lagoons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">reference</span><span class="op">)</span>
<span class="co">#&gt; Rows: 1</span>
<span class="co">#&gt; Columns: 11</span>
<span class="co">#&gt; $ ref_id       &lt;int&gt; 22</span>
<span class="co">#&gt; $ doi          &lt;chr&gt; "10.1016/s0272-7714(02)00410-9"</span>
<span class="co">#&gt; $ first_author &lt;chr&gt; "manuel j. zetina-rejon"</span>
<span class="co">#&gt; $ year         &lt;chr&gt; "2003"</span>
<span class="co">#&gt; $ jstor        &lt;lgl&gt; NA</span>
<span class="co">#&gt; $ pmid         &lt;lgl&gt; NA</span>
<span class="co">#&gt; $ bibtex       &lt;chr&gt; "@article{Zetina_Rej_n_2003, doi = {10.1016/s0272-7714(0…</span>
<span class="co">#&gt; $ paper_url    &lt;chr&gt; "https://doi.org/10.1016%2Fs0272-7714%2802%2900410-9"</span>
<span class="co">#&gt; $ data_url     &lt;chr&gt; "https://globalwebdb.com/"</span>
<span class="co">#&gt; $ created_at   &lt;chr&gt; "2019-02-23T17:04:28.307Z"</span>
<span class="co">#&gt; $ updated_at   &lt;chr&gt; "2019-02-23T17:04:28.307Z"</span></pre></div>
</div>
</div>
<div id="integrated-workflow-with-rmangal" class="section level1">
<h1 class="hasAnchor">
<a href="#integrated-workflow-with-rmangal" class="anchor"></a>Integrated workflow with <strong>rmangal</strong>
</h1>
<div id="batch-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#batch-analysis" class="anchor"></a>Batch analysis</h2>
<p>So far, the search functions of <strong>rmangal</strong> allow the user to perform only a single search at a time. The simplest way to do more than one search is to loop over a vector or a list of queries. Below we exemplify how to do so using <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="va">tsn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">837855</span>, <span class="fl">169237</span><span class="op">)</span>
<span class="va">mgn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">tsn</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="../reference/search_taxonomy.html">search_taxonomy</a></span><span class="op">(</span>tsn <span class="op">=</span> <span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">get_collection</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="va">combine_mgNetworks</span>
<span class="va">mgn</span>
<span class="co">#&gt; A collection of 3 networks</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; * Network #948 included in dataset #66</span>
<span class="co">#&gt; * Description: Flower and anthophilous insect interactions in the primary cool-temperate subalpine forests and meadows at Mt. Kushigata, Yamanashi Prefecture, Japan</span>
<span class="co">#&gt; * Includes 871 edges and 456 nodes </span>
<span class="co">#&gt; * Current taxonomic IDs coverage for nodes of this network: </span>
<span class="co">#&gt;   --&gt; ITIS: 20%, BOLD: 33%, EOL: 46%, COL: 43%, GBIF: 35%, NCBI: 38%</span>
<span class="co">#&gt; * Published in ref # DOI:NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; * Network #86 included in dataset #22</span>
<span class="co">#&gt; * Description: Dietary matrix of the Huizache–Caimanero lagoon</span>
<span class="co">#&gt; * Includes 189 edges and 26 nodes </span>
<span class="co">#&gt; * Current taxonomic IDs coverage for nodes of this network: </span>
<span class="co">#&gt;   --&gt; ITIS: 81%, BOLD: 81%, EOL: 85%, COL: 81%, GBIF: 0%, NCBI: 85%</span>
<span class="co">#&gt; * Published in ref # DOI:10.1016/s0272-7714(02)00410-9</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; * Network #1101 included in dataset #77</span>
<span class="co">#&gt; * Description: Food web of the Angolan fishery landings</span>
<span class="co">#&gt; * Includes 127 edges and 28 nodes </span>
<span class="co">#&gt; * Current taxonomic IDs coverage for nodes of this network: </span>
<span class="co">#&gt;   --&gt; ITIS: 61%, BOLD: 50%, EOL: 61%, COL: 54%, GBIF: 4%, NCBI: 57%</span>
<span class="co">#&gt; * Published in ref # DOI:10.3989/scimar.2011.75n2309</span></pre></div>
</div>
<div id="geolocalize-mangal-networks-with-sf" class="section level2">
<h2 class="hasAnchor">
<a href="#geolocalize-mangal-networks-with-sf" class="anchor"></a>Geolocalize Mangal networks with <code>sf</code>
</h2>
<p>The function <code><a href="../reference/get_collection.html">get_collection()</a></code> has an argument <code>as_sf</code> than converts network metadata of mgNetwork objects to <code>sf</code> objects, which requires <a href="https://cran.r-project.org/package=sf"><code>sf</code></a> to be installed. This allows the user to easily geolocalize the networks retrieved from Mangal.</p>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="co"># assuming sf and mapview are is loaded (as we did above)</span>
<span class="va">mg_lag_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_datasets.html">search_datasets</a></span><span class="op">(</span>query <span class="op">=</span> <span class="st">'lagoon'</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/get_collection.html">get_collection</a></span><span class="op">(</span>as_sf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">mg_lag_sf</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">network</span><span class="op">)</span>
<span class="co">#&gt; [1] "sf"         "data.frame"</span></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="co"># let's combine all these sf object into a single one</span>
<span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapView</a></span><span class="op">(</span><span class="va">mg_lag_sf</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">network</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html">mapView</a></span><span class="op">(</span><span class="va">mg_lag_sf</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">network</span><span class="op">)</span></pre></div>
<p><img src="img/map2.png" width="60%"> ## Taxonomic analysis with <code>taxize</code></p>
<p>As Mangal includes taxonomic identifiers, <strong>rmangal</strong> can readily be combined with <code>taxize</code> (see <a href="https://github.com/ropensci/taxize">taxize</a> for more details about this package):</p>
<div class="sourceCode" id="cb20"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/taxize/">taxize</a></span><span class="op">)</span>
<span class="va">tsn_acer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_taxonomy.html">search_taxonomy</a></span><span class="op">(</span><span class="st">"Acer"</span><span class="op">)</span><span class="op">$</span><span class="va">taxonomy.tsn</span>
<span class="fu"><a href="https://docs.ropensci.org/taxize/reference/classification.html">classification</a></span><span class="op">(</span><span class="va">tsn_acer</span>, db <span class="op">=</span> <span class="st">"itis"</span><span class="op">)</span>
<span class="co">#&gt; $`28749`</span>
<span class="co">#&gt;               name          rank     id</span>
<span class="co">#&gt; 1          Plantae       kingdom 202422</span>
<span class="co">#&gt; 2    Viridiplantae    subkingdom 954898</span>
<span class="co">#&gt; 3     Streptophyta  infrakingdom 846494</span>
<span class="co">#&gt; 4      Embryophyta superdivision 954900</span>
<span class="co">#&gt; 5     Tracheophyta      division 846496</span>
<span class="co">#&gt; 6  Spermatophytina   subdivision 846504</span>
<span class="co">#&gt; 7    Magnoliopsida         class  18063</span>
<span class="co">#&gt; 8          Rosanae    superorder 846548</span>
<span class="co">#&gt; 9       Sapindales         order  28643</span>
<span class="co">#&gt; 10     Sapindaceae        family  28657</span>
<span class="co">#&gt; 11            Acer         genus  28727</span>
<span class="co">#&gt; 12    Acer negundo       species  28749</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`28757`</span>
<span class="co">#&gt;                name          rank     id</span>
<span class="co">#&gt; 1           Plantae       kingdom 202422</span>
<span class="co">#&gt; 2     Viridiplantae    subkingdom 954898</span>
<span class="co">#&gt; 3      Streptophyta  infrakingdom 846494</span>
<span class="co">#&gt; 4       Embryophyta superdivision 954900</span>
<span class="co">#&gt; 5      Tracheophyta      division 846496</span>
<span class="co">#&gt; 6   Spermatophytina   subdivision 846504</span>
<span class="co">#&gt; 7     Magnoliopsida         class  18063</span>
<span class="co">#&gt; 8           Rosanae    superorder 846548</span>
<span class="co">#&gt; 9        Sapindales         order  28643</span>
<span class="co">#&gt; 10      Sapindaceae        family  28657</span>
<span class="co">#&gt; 11             Acer         genus  28727</span>
<span class="co">#&gt; 12 Acer saccharinum       species  28757</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $&lt;NA&gt;</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $&lt;NA&gt;</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`837855`</span>
<span class="co">#&gt;               name          rank     id</span>
<span class="co">#&gt; 1          Plantae       kingdom 202422</span>
<span class="co">#&gt; 2    Viridiplantae    subkingdom 954898</span>
<span class="co">#&gt; 3     Streptophyta  infrakingdom 846494</span>
<span class="co">#&gt; 4      Embryophyta superdivision 954900</span>
<span class="co">#&gt; 5     Tracheophyta      division 846496</span>
<span class="co">#&gt; 6  Spermatophytina   subdivision 846504</span>
<span class="co">#&gt; 7    Magnoliopsida         class  18063</span>
<span class="co">#&gt; 8          Rosanae    superorder 846548</span>
<span class="co">#&gt; 9       Sapindales         order  28643</span>
<span class="co">#&gt; 10     Sapindaceae        family  28657</span>
<span class="co">#&gt; 11            Acer         genus  28727</span>
<span class="co">#&gt; 12  Acer japonicum       species 837855</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "classification"</span>
<span class="co">#&gt; attr(,"db")</span>
<span class="co">#&gt; [1] "itis"</span></pre></div>
</div>
<div id="network-analysis-with-igraph" class="section level2">
<h2 class="hasAnchor">
<a href="#network-analysis-with-igraph" class="anchor"></a>Network analysis with <code>igraph</code>
</h2>
<p>Once the data are retrieved and a <code>mgNetwork</code> or a <code>mgNetworkCollection</code> objects obtained, it is straightforward to convert it as a <code>igraph</code> (see the <a href="https://igraph.org/r/">dedicated website</a>) object and then to carry out network analysis:</p>
<div class="sourceCode" id="cb21"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://igraph.org">igraph</a></span><span class="op">)</span>
<span class="va">mg_lagoons</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_datasets.html">search_datasets</a></span><span class="op">(</span>query <span class="op">=</span> <span class="st">'lagoon'</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="va">get_collection</span>
<span class="co"># NB the line below returns a list of igraph objects</span>
<span class="va">ig_lagoons</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/as.igraph.html">as.igraph</a></span><span class="op">(</span><span class="va">mg_lagoons</span><span class="op">)</span>
<span class="co">## Modularity analysis for the first network</span>
<span class="fu"><a href="https://rdrr.io/pkg/igraph/man/modularity.igraph.html">modularity</a></span><span class="op">(</span><span class="va">ig_lagoons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/pkg/igraph/man/communities.html">membership</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/cluster_walktrap.html">cluster_walktrap</a></span><span class="op">(</span><span class="va">ig_lagoons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.04220207</span>
<span class="co">## Degree values for all networks</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">ig_lagoons</span>, <span class="va">degree</span><span class="op">)</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; 4904 4905 4906 4907 4908 4909 4910 4911 4912 4913 4914 4915 4916 4917 4918 4919 </span>
<span class="co">#&gt;   17   11   14   13   18   22   12   10   18   14   13   16    6   15   14   11 </span>
<span class="co">#&gt; 4920 4921 4922 4924 4925 4926 4927 4923 4929 4928 </span>
<span class="co">#&gt;   14   11   26    7   22   15   21   16    5   17 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; 6459 6460 6461 6463 6464 6465 6458 6462 6466 6456 6457 </span>
<span class="co">#&gt;    4    7    9    3    3    7    4    6    3    4    4 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; 6445 6447 6448 6449 6450 6452 6453 6454 6446 6451 6455 6443 6444 </span>
<span class="co">#&gt;    6    4    5    5   11    2    5    8    3    5    4    5    5</span></pre></div>
</div>
<div id="network-manipulation-and-visualization-with-tidygraph-and-ggraph" class="section level2">
<h2 class="hasAnchor">
<a href="#network-manipulation-and-visualization-with-tidygraph-and-ggraph" class="anchor"></a>Network manipulation and visualization with <code>tidygraph</code> and <code>ggraph</code>
</h2>
<p>The package <a href="https://github.com/thomasp85/tidygraph"><code>tidygraph</code></a> treats networks as two tidy tables (one for the edges and one for the nodes) that can be modified using the grammar of data manipulation developed in the <a href="https://www.tidyverse.org/">tidyverse</a>. Moreover, <code>tidygraph</code> wraps over most of the <code>igraph</code> functions so that the user can call a vast variety of algorithms to properly analysis networks. Fortunately, objects of class <code>mgNetwork</code> can readily be converted into <code>tbl_graph</code> objects which allows the user to benefit from all the tools included in <code>tidygraph</code>:</p>
<div class="sourceCode" id="cb22"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidygraph.data-imaginist.com">tidygraph</a></span><span class="op">)</span>
<span class="co"># NB the line below would not work with a mgNetworksCollection (use lapply)</span>
<span class="va">tg_lagoons</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/tbl_graph.html">as_tbl_graph</a></span><span class="op">(</span><span class="va">mg_lagoons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>centrality_dg <span class="op">=</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/centrality.html">centrality_degree</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">'in'</span><span class="op">)</span><span class="op">)</span>
<span class="va">tg_lagoons</span> <span class="op">%E&gt;%</span> <span class="va">as_tibble</span>
<span class="co">#&gt; # A tibble: 189 x 19</span>
<span class="co">#&gt;     from    to interaction_id date  direction type  method attr_id value public</span>
<span class="co">#&gt;    &lt;int&gt; &lt;int&gt;          &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;lgl&gt;    &lt;int&gt; &lt;dbl&gt; &lt;lgl&gt; </span>
<span class="co">#&gt;  1     6    11          48346 2003… directed  pred… NA          12 0.089 TRUE  </span>
<span class="co">#&gt;  2     6    12          48347 2003… directed  pred… NA          12 0.029 TRUE  </span>
<span class="co">#&gt;  3     9     9          48376 2003… directed  pred… NA          12 0.026 TRUE  </span>
<span class="co">#&gt;  4     9    11          48377 2003… directed  pred… NA          12 0.025 TRUE  </span>
<span class="co">#&gt;  5     9    12          48378 2003… directed  pred… NA          12 0.003 TRUE  </span>
<span class="co">#&gt;  6     9    15          48379 2003… directed  pred… NA          12 0.009 TRUE  </span>
<span class="co">#&gt;  7     9    16          48380 2003… directed  pred… NA          12 0.009 TRUE  </span>
<span class="co">#&gt;  8     9    17          48381 2003… directed  pred… NA          12 0.016 TRUE  </span>
<span class="co">#&gt;  9     9    18          48382 2003… directed  pred… NA          12 0.284 TRUE  </span>
<span class="co">#&gt; 10     9    19          48383 2003… directed  pred… NA          12 0.231 TRUE  </span>
<span class="co">#&gt; # … with 179 more rows, and 9 more variables: network_id &lt;int&gt;,</span>
<span class="co">#&gt; #   created_at &lt;chr&gt;, updated_at &lt;chr&gt;, attribute.id &lt;int&gt;,</span>
<span class="co">#&gt; #   attribute.name &lt;chr&gt;, attribute.description &lt;chr&gt;, attribute.unit &lt;lgl&gt;,</span>
<span class="co">#&gt; #   attribute.created_at &lt;chr&gt;, attribute.updated_at &lt;chr&gt;</span>
<span class="va">tg_lagoons</span> <span class="op">%N&gt;%</span> <span class="va">as_tibble</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">original_name</span>, <span class="va">taxonomy.tsn</span>, <span class="va">centrality_dg</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 26 x 3</span>
<span class="co">#&gt;    original_name  taxonomy.tsn centrality_dg</span>
<span class="co">#&gt;    &lt;chr&gt;                 &lt;int&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt;  1 Scianids             169237             1</span>
<span class="co">#&gt;  2 Elopids               28630             0</span>
<span class="co">#&gt;  3 Lutjanids            168845             1</span>
<span class="co">#&gt;  4 Carangids            168584             2</span>
<span class="co">#&gt;  5 Centropomids         167642             2</span>
<span class="co">#&gt;  6 Ariids                43998             1</span>
<span class="co">#&gt;  7 Haemulids            169055             4</span>
<span class="co">#&gt;  8 Pleuronectoids       172859             3</span>
<span class="co">#&gt;  9 Callinectes           13951             6</span>
<span class="co">#&gt; 10 Belonoids            165546             4</span>
<span class="co">#&gt; # … with 16 more rows</span></pre></div>
<p>Another strong advantage of <code>tbl_graph</code> objects is that there are the objects used by the package <a href="https://github.com/thomasp85/ggraph"><code>ggraph</code></a> that that offers various functions (theme, geoms, etc.) to efficiently visualize networks:</p>
<div class="sourceCode" id="cb23"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggraph.data-imaginist.com">ggraph</a></span><span class="op">)</span>
<span class="fu"><a href="https://ggraph.data-imaginist.com/reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">tg_lagoons</span>, layout <span class="op">=</span> <span class="st">"stress"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_parallel.html">geom_edge_parallel</a></span><span class="op">(</span>end_cap <span class="op">=</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geometry.html">circle</a></span><span class="op">(</span><span class="fl">.5</span><span class="op">)</span>, start_cap <span class="op">=</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geometry.html">circle</a></span><span class="op">(</span><span class="fl">.5</span><span class="op">)</span>,
        arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span>length <span class="op">=</span> <span class="fu">unit</span><span class="op">(</span><span class="fl">1</span>, <span class="st">'mm'</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'closed'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>colour <span class="op">=</span> <span class="va">taxonomy.rank</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">8</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/theme_graph.html">theme_graph</a></span><span class="op">(</span>background <span class="op">=</span> <span class="st">"grey40"</span>, foreground <span class="op">=</span> <span class="cn">NA</span>, text_colour <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></pre></div>
<p><img src="rmangal_files/figure-html/ggraph-1.png" width="700"></p>
</div>
<div id="creating-a-list-references-for-a-set-of-networks" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-list-references-for-a-set-of-networks" class="anchor"></a>Creating a list references for a set of networks</h2>
<p>We can easily print the BibTeX of all publications involved in the networks collection.</p>
<div class="sourceCode" id="cb24"><pre class="downlit">
   <span class="fu"><a href="../reference/search_datasets.html">search_datasets</a></span><span class="op">(</span>query <span class="op">=</span> <span class="st">'lagoon'</span><span class="op">)</span> <span class="op">%&gt;%</span>
   <span class="va">get_collection</span> <span class="op">%&gt;%</span> <span class="va">get_citation</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span>sep <span class="op">=</span> <span class="st">"\n\n"</span><span class="op">)</span>
<span class="co">#&gt; @article{Zetina_Rej_n_2003, doi = {10.1016/s0272-7714(02)00410-9}, url = {https://doi.org/10.1016%2Fs0272-7714%2802%2900410-9}, year = 2003, month = {aug}, publisher = {Elsevier {BV}}, volume = {57}, number = {5-6}, pages = {803--815}, author = {Manuel J. Zetina-Rejón and Francisco Arreguí-Sánchez and Ernesto A. Chávez}, title = {Trophic structure and flows of energy in the Huizache{   extendash}Caimanero lagoon complex on the Pacific coast of Mexico},journal = {Estuarine, Coastal and Shelf Science}}</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; @book{yanez_1978, Author = {Yáñez-Arancibia, Alejandro}, Editor = {Universidad Nacional Autónoma de México, Centro de Ciencias del Mar y Limnología. Ciudad Universitaria, México, D.F. -- 1a ed.},Title = {Taxonomía, ecología y estructura de las comunidades de peces en lagunas costeras con bocas efímeras del Pacífico de México}, Year = {1978}}</span></pre></div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-chamberlain_2019">
<p>Chamberlain, Scott, Eduard Szoecs, Zachary Foster, Zebulun Arendsee, Carl Boettiger, Karthik Ram, Ignasi Bartomeus, et al. 2019. <em>Taxize: Taxonomic Information from Around the Web</em>. <a href="https://github.com/ropensci/taxize">https://github.com/ropensci/taxize</a>.</p>
</div>
<div id="ref-poisot_mangal_2016">
<p>Poisot, Timothée, Benjamin Baiser, Jennifer A. Dunne, Sonia Kéfi, François Massol, Nicolas Mouquet, Tamara N. Romanuk, Daniel B. Stouffer, Spencer A. Wood, and Dominique Gravel. 2016. “Mangal - Making Ecological Network Analysis Simple.” <em>Ecography</em> 39 (4): 384–90. <a href="https://doi.org/10.1111/ecog.00976">https://doi.org/10.1111/ecog.00976</a>.</p>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review">Software Review Process</a></li>
                            <li><a href="https://ropensci.org/about#team">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate">Donate</a></li>
                            <li><a href="https://ropensci.org/contact">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/">Documentation</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '799829e946e1f0f9cd5b5a782c6316b9',
    indexName: 'ropensci-rmangal',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
